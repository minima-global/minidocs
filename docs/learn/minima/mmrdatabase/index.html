<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.17">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Minima Documentation RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Minima Documentation Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","G-BKE0W3LK7F","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-BKE0W3LK7F"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-BKE0W3LK7F",{})</script><title data-rh="true">MMR Database | Minima Documentation</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.minima.global//docs/learn/minima/mmrdatabase"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="MMR Database | Minima Documentation"><meta data-rh="true" name="description" content="Overview"><meta data-rh="true" property="og:description" content="Overview"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.minima.global//docs/learn/minima/mmrdatabase"><link data-rh="true" rel="alternate" href="https://docs.minima.global//docs/learn/minima/mmrdatabase" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.minima.global//docs/learn/minima/mmrdatabase" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.30ae9013.css">
<link rel="preload" href="/assets/js/runtime~main.2675de74.js" as="script">
<link rel="preload" href="/assets/js/main.3218c518.js" as="script">
</head>
<body class="navigation-with-keyboard" data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Minima" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/logo.svg" alt="Minima" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">Minima Docs</b></a><a class="navbar__item navbar__link" href="/docs/learn/networkoverview">Learn</a><a class="navbar__item navbar__link" href="/docs/runanode/get_started_in_3_steps">Run a Node</a><a class="navbar__item navbar__link" href="/docs/earnrewards/minimaincentiveprogram">Incentive Program</a><a class="navbar__item navbar__link" href="/docs/about/tokendistribution/">Tokenomics</a></div><div class="navbar__items navbar__items--right"><a href="https://www.minima.global/our-community" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Community<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://github.com/minima-global" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_S7eR toggle_TdHA toggleDisabled_f9M3"><div class="toggleButton_rCf9" role="button" tabindex="-1"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></div><input type="checkbox" class="toggleScreenReader_g2nN" aria-label="Switch between dark and light mode (currently light mode)"></div><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-current"></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y"><nav class="menu thin-scrollbar menu_SkdO"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/about/welcome">About</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/learn/networkoverview">Learn</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/learn/networkoverview">Network Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/docs/learn/minima/coreconcepts">Minima</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/learn/minima/coreconcepts">Core Concepts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/learn/minima/configuration">Configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/learn/minima/transactions">Transactions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/learn/minima/mmrdatabase">MMR Database</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/learn/minima/txpowunits">TxPoW Units &amp; Blocks</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/learn/minima/theblockchain">The Blockchain</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/learn/minima/miningconsensus">Mining and Consensus</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/learn/minima/colouredcoins">Coloured Coins</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/learn/minima/keysandsignatures">Keys and Digital Signatures</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/learn/minima/scripting">Scripting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/learn/minima/quantumsecurity">Quantum Security</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/learn/maxima/maximaintro">Maxima</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/learn/minidapps/minidappsintro">MiniDapps</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/learn/minimawhitepaper/abstract">Minima Whitepaper</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/learn/glossary">Glossary</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/runanode/get_started_in_3_steps">Run a Node</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/earnrewards/minimaincentiveprogram">Earn Rewards</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/buildonminima/startaprivatenode">Build</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/terms/minimatermsandconditions">Terms</a></div></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/">üè†</a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link breadcrumbsItemLink_e5ie">Learn</span></li><li class="breadcrumbs__item"><span class="breadcrumbs__link breadcrumbsItemLink_e5ie">Minima</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/docs/learn/minima/mmrdatabase">MMR Database</a></li></ul></nav><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><h1>MMR Database</h1><h2 class="anchor anchorWithStickyNavbar_mojV" id="overview">Overview<a class="hash-link" href="#overview" title="Direct link to heading">‚Äã</a></h2><p>As the blockchain is heavily pruned, users must store proof that their coins are unspent. This is the role of the Merkle Mountain Range (MMR) Proof database. The MMR is a <strong>hash sum tree</strong> containing the proofs for all Transaction Outputs (TxOs) i.e. coins in the system.
Note: these coins may be Spent Transaction Outputs (STxOs) or Unspent Transaction Outputs (UTxOs). </p><p>The tree is <strong>append-only</strong> and is updated as coins are spent and created. For each new UTxO created from a transaction output, a new leaf node is created in the MMR. Coins are hashed in pairs, building up the largest <strong>binary tree</strong> possible until a new tree is required. As new trees are required, they start to look like a range of mountains - giving the MMR its name.</p><p>When the total number of leaf nodes (Coins/TxOs) are not equal to <em>2 <sup>n</sup> where n = int{</em>0,...,256<em>}</em>, there will be multiple trees of different heights, creating multiple peak nodes as shown below.</p><p><em>Diagram: Merkle Mountain Range (MMR) with 11 coins (green) and three peaks (blue)</em></p><p><img loading="lazy" alt="MMR Database" src="/assets/images/mMRDatabase1Lm-b9e040404f972c4fa47448fade2c4950.svg#gh-light-mode-only" width="512" height="216"><img loading="lazy" alt="MMR Database" src="/assets/images/mMRDatabase1Dm-8f2cdf2818a5d6f9d8f48de6d890aa87.svg#gh-dark-mode-only" width="512" height="216"></p><p>To create a single MMR tree, the peaks must be collected (or ‚Äòbagged‚Äô) starting from left to right. Until a single root hash is found.</p><p><em>Diagram: A complete Merkle Mountain Range (MMR) with three peaks and root</em></p><p><img loading="lazy" alt="MMR Database" src="/assets/images/mMRDatabase2Lm-b7da3906a8267abd476b04cbc6ab0610.svg#gh-light-mode-only" width="512" height="315"><img loading="lazy" alt="MMR Database" src="/assets/images/mMRDatabase2Dm-d25ba25d2fc83b6dd3b1cd3af931a672.svg#gh-dark-mode-only" width="512" height="315"></p><p>Each node in the tree will have a globally unique reference to it by combining the row/level it is in and its entry number on the row. Using a hash table to track entries, each node can be identified through a reference <!-- -->[R,E]<!-- --> where R is the row number and E is the Entry number. </p><p><em>Diagram: A complete MMR with hash table references <!-- -->[row, entry number]</em></p><p><img loading="lazy" alt="MMR Database" src="/assets/images/mMRDatabase3Lm-701bd67d8cd672cce7b4515c2d80a778.svg#gh-light-mode-only" width="512" height="315"><img loading="lazy" alt="MMR Database" src="/assets/images/mMRDatabase3Dm-b172552a9b6a7df26f7cb9d9c739c83e.svg#gh-dark-mode-only" width="512" height="315"></p><p><em>For example, the second coin with entry number 1 will have a reference in the hash table of <!-- -->[0,1]<!-- --> (Row 0, Entry 1).</em></p><p>The maximum possible number of rows in the MMR is set to 256, using the MAXROWS parameter. With each two new coins, a new parent node is added, therefore the maximum number of coins in the MMR would result in a perfect binary tree with one peak and 2<sup>256</sup> coins.</p><p><strong>2<sup>256</sup> is the maximum number of coins (UTxOs) that can ever exist in Minima.</strong> </p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>¬†</h5></div><div class="admonition-content"><p><em>Using the default parameters of 256 transactions per block, 50 second block times and assuming 3 UTxOs per transaction, it would take</em></p><p><em>5,737,098,536,063,750,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000 years to fill the MMR.</em></p></div></div><p>However, users do not store the complete MMR for all the coins in the system, as this would be too burdensome, rather they only store the entries relevant to their own coins which must be provided as CoinProofs in the Transaction Witness when they wish to spend their coins.</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>¬†</h5></div><div class="admonition-content"><p>The MMR can be thought of as a book, where all users keep a copy of the spine (root and peaks) and their own page in the book (their CoinProofs). When a user wishes to spend their coins, they provide their page and the spine. Provided their page fits the spine and the spine matches that of the other nodes in the network, the user‚Äôs coins can be proved to be valid. </p></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="mmr-data">MMR Data<a class="hash-link" href="#mmr-data" title="Direct link to heading">‚Äã</a></h2><p>Each node in the MMR has unique MMR Data consisting of a hash and a value, defined as follows:</p><table><thead><tr><th align="left">MMRData Object</th><th align="left">Leaf Nodes - TxOs (Row 0)</th><th align="left">Parent Nodes (inc Peaks &amp; Root)</th><th align="left">Type</th></tr></thead><tbody><tr><td align="left"><strong>Data (Hash)</strong></td><td align="left">Hash(coin object)<br>The coin could be spent or unspent.</td><td align="left">Hash<!-- -->[<br>Hash(left child data object),<br>Hash(right child data object),value object]</td><td align="left">MiniData (32 byte hash)</td></tr><tr><td align="left">Value</td><td align="left">Minima Value of coin, if<br> unspent,<br>Or 0, if spent</td><td align="left">Sum of the value of child nodes</td><td align="left">MiniNumber</td></tr></tbody></table><p><em>Diagram: Example MMR Data for two coins and a parent node in the MMR.</em></p><p><img loading="lazy" alt="MMR Database" src="/assets/images/mMRDatabase4Lm-1bac5bfb295fae0f6d042ea7456155a1.svg#gh-light-mode-only" width="512" height="261"><img loading="lazy" alt="MMR Database" src="/assets/images/mMRDatabase4Dm-586a74261fe89a03a525ac7c7ddd747f.svg#gh-dark-mode-only" width="512" height="261"></p><p>Each entry in an MMR is defined by its attributes:</p><table><thead><tr><th align="left">MMREntry Attribute</th><th>Description</th><th>Type</th></tr></thead><tbody><tr><td align="left"><strong>Row</strong></td><td>The hash table row representing its level in the tree (where coins are Level 0)</td><td>String</td></tr><tr><td align="left"><strong>Entry Number</strong></td><td>The index of the Entry on a specific row from left to right, starting from 0</td><td>MMREntryNumber</td></tr><tr><td align="left"><strong>Data</strong></td><td>The MMR data (Hash and Value) of the entry</td><td>MMRData</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_mojV" id="proofs">Proofs<a class="hash-link" href="#proofs" title="Direct link to heading">‚Äã</a></h2><p>When a user wishes to spend their coins, they must provide proof that their coins are unspent by providing a <strong>CoinProof</strong> for each coin they wish to spend. <strong>A CoinProof is a list of Proof Chunks</strong> that any other node can use to independently verify that someone else‚Äôs coin exists and is unspent, without having to store the proofs for every coin in the network.</p><p>Given a CoinProof, any node verifying a transaction can calculate the path (i.e. the intermediate parent hashes), from another user&#x27;s coin to a peak in the MMR. If the calculated peak hash matches the peak hash from their own MMR, the CoinProof is valid, otherwise the CoinProof and transaction are not valid.</p><p><strong>Proof Chunks</strong> consist of the MMR Data (hash and value) for an MMR entry and a True/False flag indicating whether it is a left sibling or not. </p><p><em>Diagram: Example CoinProof for coin 7 (coin to peak)</em></p><p><img loading="lazy" alt="MMR Database" src="/assets/images/mMRDatabase5Lm-0c09900fe9ff690460b67876750c04f0.svg#gh-light-mode-only" width="512" height="356"><img loading="lazy" alt="MMR Database" src="/assets/images/mMRDatabase5Dm-3c6114e28e8123d2772dffbb01d69502.svg#gh-dark-mode-only" width="512" height="356"></p><p>The CoinProof for coin 7 consists of the coin and the yellow Proof Chunks, i.e. entries <strong>{<!-- -->[0,6]<!-- -->,<!-- -->[0,7]<!-- -->,<!-- -->[1,2]<!-- -->,<!-- -->[2,0]<!-- -->}</strong> , so that:</p><ul><li>Hashing <!-- -->[0,6]<!-- --> with <!-- -->[0,7]<!-- --> calculates parent <!-- -->[1,3]</li><li>Hashing <!-- -->[1,2]<!-- --> with <!-- -->[1,3]<!-- --> calculates parent <!-- -->[2,1]</li><li>Hashing <!-- -->[2,0]<!-- --> with <!-- -->[2,1]<!-- --> calculates peak <!-- -->[3,0]</li></ul><p>Any node receiving this CoinProof is able to calculate the parents and the peak node, and by comparing it to their own peaks, proving that Coin 7 is valid.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="mmr-sets">MMR Sets<a class="hash-link" href="#mmr-sets" title="Direct link to heading">‚Äã</a></h2><p>When a coin is <strong>spent</strong>, the Spent flag of the coin changes from false to true, changing the hash of the coin.</p><p>When a new coin is <strong>created</strong> (as an output to a transaction), a new coin is added as a leaf node to the tree.</p><p>In both cases, the intermediate parent nodes, peaks and root will need to be calculated for the new hash of the coin. Therefore the CoinProofs for all coins in the system change with each new block and it is therefore essential for users to keep up to date with the latest block. </p><p>Each block contains an <strong>MMR Set</strong> containing updated and new MMR Entries for all the spent and new coins of the main transaction in the block. </p><p>Each block has its own set of MMR entries with the following attributes: </p><table><thead><tr><th align="left">MMR Attribute</th><th align="left">Description</th><th align="left">Type</th></tr></thead><tbody><tr><td align="left"><strong>Block Time</strong></td><td align="left">The blocktime for the MMR set</td><td align="left">MiniNumber</td></tr><tr><td align="left"><strong>Elen</strong></td><td align="left">How many entries in this MMR set</td><td align="left">MiniNumber</td></tr><tr><td align="left"><strong>Entry Number</strong></td><td align="left">The latest entry number</td><td align="left">MMREntryNumber</td></tr><tr><td align="left"><strong>Set Entries</strong></td><td align="left">The <strong>hash table</strong> elements for all the MMR Entries in this set.<br>HashTable&lt;0,1&gt; is the entry on Row 0, Entry index 1</td><td align="left">Enumeration of MMR Entries</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_mojV" id="traversing-the-mmr">Traversing the MMR<a class="hash-link" href="#traversing-the-mmr" title="Direct link to heading">‚Äã</a></h2><p>Starting from any node in the MMR, we can navigate through it as follows:</p><table><thead><tr><th align="left">Operation</th><th align="left">Row Operation</th><th align="left">Entry Number Operation</th></tr></thead><tbody><tr><td align="left">Right Sibling</td><td align="left">-</td><td align="left">Add 1</td></tr><tr><td align="left">Left Sibling</td><td align="left">-</td><td align="left">Minus 1</td></tr><tr><td align="left">Parent</td><td align="left">Add 1</td><td align="left">Divide by 2, Round down to nearest integer</td></tr><tr><td align="left">Left Child</td><td align="left">Minus 1</td><td align="left">Multiply by 2</td></tr><tr><td align="left">Right Child</td><td align="left">Minus 1</td><td align="left">Multiply by 2, Add 1</td></tr></tbody></table><p>Separate MMRs are also used to store Signature Proofs and Script Proofs.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/minima-global/minidocs/docs/learn/minima/mmrdatabase.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/learn/minima/transactions"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Transactions</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/learn/minima/txpowunits"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">TxPoW Units &amp; Blocks</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#mmr-data" class="table-of-contents__link toc-highlight">MMR Data</a></li><li><a href="#proofs" class="table-of-contents__link toc-highlight">Proofs</a></li><li><a href="#mmr-sets" class="table-of-contents__link toc-highlight">MMR Sets</a></li><li><a href="#traversing-the-mmr" class="table-of-contents__link toc-highlight">Traversing the MMR</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/about/vision">Introduction</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://discord.gg/minima" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://t.me/Minima_Global" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Telegram<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/Minima_Global" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Devs</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/minima-global" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">All rights reserved Minima Ltd ¬© 2022</div></div></div></footer></div>
<script src="/assets/js/runtime~main.2675de74.js"></script>
<script src="/assets/js/main.3218c518.js"></script>
</body>
</html>