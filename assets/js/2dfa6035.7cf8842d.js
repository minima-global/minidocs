"use strict";(self.webpackChunkminima_docs=self.webpackChunkminima_docs||[]).push([[7627],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>m});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),c=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),d=c(n),m=r,h=d["".concat(l,".").concat(m)]||d[m]||p[m]||o;return n?a.createElement(h,i(i({ref:t},u),{},{components:n})):a.createElement(h,i({ref:t},u))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var c=2;c<o;c++)i[c]=n[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},607:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>p,frontMatter:()=>o,metadata:()=>s,toc:()=>c});var a=n(7462),r=(n(7294),n(3905));const o={sidebar_position:8},i="Exchange Contract",s={unversionedId:"buildonminima/txntutorial/layer1/exchangecontract",id:"buildonminima/txntutorial/layer1/exchangecontract",title:"Exchange Contract",description:"Lets create a simple Layer 1 exchange contract for Minima and some tokens. Minima allows you to create tokens very easily - and tokens can have their own script. When sending a token the address script AND token script must return TRUE.",source:"@site/docs/buildonminima/txntutorial/layer1/exchangecontract.md",sourceDirName:"buildonminima/txntutorial/layer1",slug:"/buildonminima/txntutorial/layer1/exchangecontract",permalink:"/docs/buildonminima/txntutorial/layer1/exchangecontract",draft:!1,editUrl:"https://github.com/minima-global/minidocs/docs/buildonminima/txntutorial/layer1/exchangecontract.md",tags:[],version:"current",sidebarPosition:8,frontMatter:{sidebar_position:8},sidebar:"tutorialSidebar",previous:{title:"Hashed Time Lock Contract",permalink:"/docs/buildonminima/txntutorial/layer1/hashtimelockcontract"},next:{title:"Flash Cash",permalink:"/docs/buildonminima/txntutorial/layer1/flashcash"}},l={},c=[],u={toc:c};function p(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"exchange-contract"},"Exchange Contract"),(0,r.kt)("p",null,"Lets create a simple Layer 1 exchange contract for Minima and some tokens. Minima allows you to create tokens very easily - and tokens can have their own script. When sending a token the address script AND token script must return TRUE."),(0,r.kt)("p",null,"For now let\u2019s first create a simple token"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"tokencreate name:mytoken amount:1000\n")),(0,r.kt)("p",null,"This will create a token with a globally unique tokenid."),(0,r.kt)("p",null,"Use ",(0,r.kt)("inlineCode",{parentName:"p"},"balance")," and you will see it there."),(0,r.kt)("p",null,"Now create yourself a ",(0,r.kt)("inlineCode",{parentName:"p"},"newaddress"),", we will use the public key and address."),(0,r.kt)("p",null,"Use your key from before (or create a new one).. what does this script do.."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"IF SIGNEDBY(0xTheOwnerPublicKey) THEN RETURN TRUE ENDIF RETURN VERIFYOUT( @INPUT 0xYouAddress 10 0x00 TRUE )\n")),(0,r.kt)("p",null,"This contract says, the owner can cancel at any time, by signing with their key OR you can spend it if you send 10 Minima ",(0,r.kt)("inlineCode",{parentName:"p"},"( tokenid 0x00 )")," to ",(0,r.kt)("inlineCode",{parentName:"p"},"0xYourAddress")," at the opposite output in the transaction.\n",(0,r.kt)("inlineCode",{parentName:"p"},"ASSERT")," will do nothing if the expression is TRUE but RETURN FALSE if the expression is FALSE."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"VERIFYOUT")," checks that an output exists of a certain address , amount and tokenid - at a certain position, and if you are keeping the state. "),(0,r.kt)("p",null,"By using ",(0,r.kt)("inlineCode",{parentName:"p"},"@INPUT")," you know the opposite output must be the desired one and multiple exchange contracts can take place in a single transaction."),(0,r.kt)("p",null,"You would need to add this as a script as before. But it\u2019s not so useful as it is specific to you.."),(0,r.kt)("p",null,"A better contract would be.."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"IF SIGNEDBY( PREVSTATE(0) ) THEN RETURN TRUE ENDIF\nASSERT VERIFYOUT( @INPUT PREVSTATE(1) PREVSTATE(2) PREVSTATE(3) TRUE ) RETURN TRUE\n")),(0,r.kt)("p",null,"This contract is generic, the values would be entered as state variables in the initial transaction, you can set state variables in ",(0,r.kt)("inlineCode",{parentName:"p"},"send"),", when you send some tokens/ Minima to the address, and it allows you to specify how much of what token you want sent to a specific address."),(0,r.kt)("p",null,"You can find it's address with:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'scripts action:clean script:"IF SIGNEDBY( PREVSTATE(0) THEN RETURN TRUE ENDIF ASSERT VERIFYOUT( @INPUT PREVSTATE(1) PREVSTATE(2) PREVSTATE(3) TRUE ) RETURN TRUE"\n')),(0,r.kt)("p",null,"In this case this is:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"0xBB696A834B6FD91F62A28C9BDCF3754C77F03AFFFEE4EBA3A7485FDC8FD2F3C9\n")),(0,r.kt)("p",null,"You can easily send funds with the state variables using the send function."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'send amount:1 address:0x39AC9C96DBC9E4A108E6EBB795003A53F11258BC47EECF0C03275C500CB8DDA1 state:{"0":"0xOwnerKey","1":"0xOwnerAddress","2":"0xDesiredAmount","3":"0xDesiredToken"}\n')),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"clean")," takes your script and formats it correctly for use on Minima. You can use lowercase and spaces and these will all be removed / fixed."))}p.isMDXComponent=!0}}]);