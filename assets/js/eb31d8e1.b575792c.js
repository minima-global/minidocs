"use strict";(self.webpackChunkminima_docs=self.webpackChunkminima_docs||[]).push([[4449],{3905:function(t,e,n){n.d(e,{Zo:function(){return u},kt:function(){return m}});var a=n(7294);function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(t,e){if(null==t)return{};var n,a,r=function(t,e){if(null==t)return{};var n,a,r={},o=Object.keys(t);for(a=0;a<o.length;a++)n=o[a],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(a=0;a<o.length;a++)n=o[a],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}var s=a.createContext({}),c=function(t){var e=a.useContext(s),n=e;return t&&(n="function"==typeof t?t(e):i(i({},e),t)),n},u=function(t){var e=c(t.components);return a.createElement(s.Provider,{value:e},t.children)},d={inlineCode:"code",wrapper:function(t){var e=t.children;return a.createElement(a.Fragment,{},e)}},p=a.forwardRef((function(t,e){var n=t.components,r=t.mdxType,o=t.originalType,s=t.parentName,u=l(t,["components","mdxType","originalType","parentName"]),p=c(n),m=r,h=p["".concat(s,".").concat(m)]||p[m]||d[m]||o;return n?a.createElement(h,i(i({ref:e},u),{},{components:n})):a.createElement(h,i({ref:e},u))}));function m(t,e){var n=arguments,r=e&&e.mdxType;if("string"==typeof t||r){var o=n.length,i=new Array(o);i[0]=p;var l={};for(var s in e)hasOwnProperty.call(e,s)&&(l[s]=e[s]);l.originalType=t,l.mdxType="string"==typeof t?t:r,i[1]=l;for(var c=2;c<o;c++)i[c]=n[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},5437:function(t,e,n){n.r(e),n.d(e,{assets:function(){return u},contentTitle:function(){return s},default:function(){return m},frontMatter:function(){return l},metadata:function(){return c},toc:function(){return d}});var a=n(7462),r=n(3366),o=(n(7294),n(3905)),i=["components"],l={sidebar_position:1},s="Future Cash",c={unversionedId:"buildonminima/txntutorial/dappcontracts/futurecash",id:"buildonminima/txntutorial/dappcontracts/futurecash",title:"Future Cash",description:"About",source:"@site/docs/buildonminima/txntutorial/dappcontracts/futurecash.md",sourceDirName:"buildonminima/txntutorial/dappcontracts",slug:"/buildonminima/txntutorial/dappcontracts/futurecash",permalink:"/docs/buildonminima/txntutorial/dappcontracts/futurecash",editUrl:"https://github.com/minima-global/minidocs/docs/buildonminima/txntutorial/dappcontracts/futurecash.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Coin Flip v2",permalink:"/docs/buildonminima/txntutorial/layer2/coinflipv2"},next:{title:"Vestr",permalink:"/docs/buildonminima/txntutorial/dappcontracts/vestr"}},u={},d=[{value:"About",id:"about",level:2},{value:"Use Cases",id:"use-cases",level:2},{value:"Smart Contract",id:"smart-contract",level:2},{value:"Globals &amp; State Variables used",id:"globals--state-variables-used",level:2},{value:"Contract address",id:"contract-address",level:2},{value:"Sending coins to the contract",id:"sending-coins-to-the-contract",level:2},{value:"Example",id:"example",level:2},{value:"Source code",id:"source-code",level:2}],p={toc:d};function m(t){var e=t.components,n=(0,r.Z)(t,i);return(0,o.kt)("wrapper",(0,a.Z)({},p,n,{components:e,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"future-cash"},"Future Cash"),(0,o.kt)("h2",{id:"about"},"About"),(0,o.kt)("p",null,"Future cash is a simple ",(0,o.kt)("strong",{parentName:"p"},"time-lock")," contract."),(0,o.kt)("p",null,"The Future Cash smart contract holds Minima, custom tokens, or NFTs until a certain block height, after which only the recipient is able to claim the tokens from the contract."),(0,o.kt)("p",null,"The recipient is the wallet owner that will be able to claim the tokens once the specified block height has passed. This can be different to the user who initially sent the funds to the contract.  "),(0,o.kt)("h2",{id:"use-cases"},"Use Cases"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Savings")," - to lock away ",(0,o.kt)("strong",{parentName:"li"},"your own")," funds, preventing you from spending them until your chosen date."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Savings for others")," - to lock away savings for ",(0,o.kt)("strong",{parentName:"li"},"others")," e.g. kids, only allowing access once a certain amount of time has passed."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Proof of inaccessibility")," - Lock away project funds to prove they are inaccessible for a certain amount of time.")),(0,o.kt)("h2",{id:"smart-contract"},"Smart Contract"),(0,o.kt)("p",null,"This contract will return ",(0,o.kt)("inlineCode",{parentName:"p"},"TRUE")," if 2 conditions are met when attempting to spend this coin in a transaction:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"The current block is greater than or equal to state variable ",(0,o.kt)("inlineCode",{parentName:"p"},"1")," of the locked coin - ",(0,o.kt)("inlineCode",{parentName:"p"},"PREVSTATE(1)")," ",(0,o.kt)("strong",{parentName:"p"},"OR")," the age of the locked coin (in blocks) is greater than or equal to state variable ",(0,o.kt)("inlineCode",{parentName:"p"},"4")," of the locked coin - ",(0,o.kt)("inlineCode",{parentName:"p"},"PREVSTATE(4)"),"."),(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"AND"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"The input and output coins at the equivalent index of the transaction - ",(0,o.kt)("inlineCode",{parentName:"p"},"VERIFYOUT")," - have the same values for ",(0,o.kt)("inlineCode",{parentName:"p"},"PREVSTATE(2)")," (owner's address), amount, and tokenid. This ensures that the coin is being sent in whole from the contract to its rightful owner.  ",(0,o.kt)("inlineCode",{parentName:"p"},"FALSE")," indicates that the coin state - the PREVSTATEs - are not stored in the coins that are created from the transaction."))),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx"},"RETURN (@BLOCK GTE PREVSTATE(1) OR @COINAGE GTE PREVSTATE(4)) AND VERIFYOUT(@INPUT PREVSTATE(2) @AMOUNT @TOKENID FALSE)\n")),(0,o.kt)("h2",{id:"globals--state-variables-used"},"Globals & State Variables used"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"@")," Represents a global variable"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"STATE")," represents a state variable given at the time the transaction is constructed. Once the transaction has confirmed and the coins are locked in the contract, the state variables are stored in the coin and become the ",(0,o.kt)("inlineCode",{parentName:"p"},"PREVSTATE")," values."),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},"State Variable"),(0,o.kt)("th",{parentName:"tr",align:null},"Description"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"1"),(0,o.kt)("td",{parentName:"tr",align:null},"The end block height. After this block, the funds will be available to claim from the contract")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"2"),(0,o.kt)("td",{parentName:"tr",align:null},"The owner's 0x wallet address")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"3"),(0,o.kt)("td",{parentName:"tr",align:null},"Contract end time in milli chosen by the user who locked the funds (i.e. sent the funds to the contract)")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"4"),(0,o.kt)("td",{parentName:"tr",align:null},"How many blocks are required to have passed before they become available to claim (calculated).")))),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx"},"@BLOCK - The current block height at the time the transaction is attempted\nPREVSTATE(1) - The end block height. After this block, the funds will be available to claim from the contract\n\n@COINAGE - How many blocks deep is the coin\nPREVSTATE(4) - How many blocks are required to have passed before they become available to claim.\n\n@INPUT - Input number of the coin in the transaction\nPREVSTATE(2) - The owner's 0x wallet address\n@AMOUNT - Amount of the coin being used as an input to the transaction\n@TOKENID - TokenID of the coin being used as an input to the transaction\n\nPREVSTATE(3) - Contract end time in milli chosen by the user who locked the funds (i.e. sent the funds to the contract) \n")),(0,o.kt)("h2",{id:"contract-address"},"Contract address"),(0,o.kt)("p",null,"The hash of the contract is: "),(0,o.kt)("p",null,"0x address: ",(0,o.kt)("inlineCode",{parentName:"p"},"0xEA8823992AB3CEBBA855D68006F0D05B0C4838FE55885375837D90F98954FA13"),(0,o.kt)("br",null),"\nMx address: ",(0,o.kt)("inlineCode",{parentName:"p"},"MxG087AH0HPWAYJPQTQGYEMG03F1K2R1H43HVWYH19NB0RTW3SZWY7Q2F79810N")),(0,o.kt)("p",null,"Sending Minima or custom tokens to this address will lock them in the Future Cash smart contract and will be unsendable until all contract conditions are met. "),(0,o.kt)("h2",{id:"sending-coins-to-the-contract"},"Sending coins to the contract"),(0,o.kt)("p",null,"To send coins to the Future Cash contract, we can use the ",(0,o.kt)("inlineCode",{parentName:"p"},"send")," command, providing the following parameters:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"password:")," - the node password if locked"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"amount:")," - the total amount to send to the Future cash contract"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"address:")," - the Future Cash contract address"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"tokenid:")," - the tokenid of the token being sent to the contract. Default 0x00 for Minima"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"state:")," - list of state variables as defined above"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"burn:")," - optional amount of Minima to burn with the transaction")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-tsx"},"send password:\namount: \naddress:\ntokenid:\nstate:\nburn:\n")),(0,o.kt)("h2",{id:"example"},"Example"),(0,o.kt)("p",null,"Example send command to lock a coin in the Future cash contract"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx"},'send amount:2 \naddress:MxG087AH0HPWAYJPQTQGYEMG03F1K2R1H43HVWYH19NB0RTW3SZWY7Q2F79810N\nstate:{"1":"696347","2":"0x3DC92CD49CA6513AFF6180E49F287B0C8CDF78076CDF05FE6E00E66EFF6CA479","3":"1708390800000","4":"535"}\n')),(0,o.kt)("p",null,"Example coin locked in Future cash contract"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx"},'"coinid":"0xC67DB6138B578FF734D6D68CC7D6C97F7F17A5B96E4D00215390B54F93F5CF8B",\n    "amount":"2",\n    "address":"0xEA8823992AB3CEBBA855D68006F0D05B0C4838FE55885375837D90F98954FA13",\n    "miniaddress":"MxG087AH0HPWAYJPQTQGYEMG03F1K2R1H43HVWYH19NB0RTW3SZWY7Q2F79810N",\n    "tokenid":"0x00",\n    "token":null,\n    "storestate":true,\n    "state":[{\n      "port":1,\n      "type":2,\n      "data":"696347"\n    },\n    {\n      "port":2,\n      "type":1,\n      "data":"0x3DC92CD49CA6513AFF6180E49F287B0C8CDF78076CDF05FE6E00E66EFF6CA479"\n    },\n    {\n      "port":3,\n      "type":2,\n      "data":"1708390800000"\n    },\n    {\n      "port":4,\n      "type":2,\n      "data":"535"\n    }],\n    "spent":false,\n    "mmrentry":"512828",\n    "created":"695816"\n  },\n')),(0,o.kt)("h2",{id:"source-code"},"Source code"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://github.com/minima-global/fcash"},"https://github.com/minima-global/fcash")))}m.isMDXComponent=!0}}]);