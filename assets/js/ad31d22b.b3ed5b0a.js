"use strict";(self.webpackChunkminima_docs=self.webpackChunkminima_docs||[]).push([[3333],{3905:(t,e,a)=>{a.d(e,{Zo:()=>p,kt:()=>u});var n=a(7294);function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function i(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function o(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?i(Object(a),!0).forEach((function(e){r(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function l(t,e){if(null==t)return{};var a,n,r=function(t,e){if(null==t)return{};var a,n,r={},i=Object.keys(t);for(n=0;n<i.length;n++)a=i[n],e.indexOf(a)>=0||(r[a]=t[a]);return r}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)a=i[n],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}var s=n.createContext({}),m=function(t){var e=n.useContext(s),a=e;return t&&(a="function"==typeof t?t(e):o(o({},e),t)),a},p=function(t){var e=m(t.components);return n.createElement(s.Provider,{value:e},t.children)},d="mdxType",k={inlineCode:"code",wrapper:function(t){var e=t.children;return n.createElement(n.Fragment,{},e)}},c=n.forwardRef((function(t,e){var a=t.components,r=t.mdxType,i=t.originalType,s=t.parentName,p=l(t,["components","mdxType","originalType","parentName"]),d=m(a),c=r,u=d["".concat(s,".").concat(c)]||d[c]||k[c]||i;return a?n.createElement(u,o(o({ref:e},p),{},{components:a})):n.createElement(u,o({ref:e},p))}));function u(t,e){var a=arguments,r=e&&e.mdxType;if("string"==typeof t||r){var i=a.length,o=new Array(i);o[0]=c;var l={};for(var s in e)hasOwnProperty.call(e,s)&&(l[s]=e[s]);l.originalType=t,l[d]="string"==typeof t?t:r,o[1]=l;for(var m=2;m<i;m++)o[m]=a[m];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}c.displayName="MDXCreateElement"},5729:(t,e,a)=>{a.r(e),a.d(e,{assets:()=>s,contentTitle:()=>o,default:()=>k,frontMatter:()=>i,metadata:()=>l,toc:()=>m});var n=a(7462),r=(a(7294),a(3905));const i={sidebar_position:4},o="TxPoW Units & Blocks",l={unversionedId:"learn/minima/txpowunits",id:"learn/minima/txpowunits",title:"TxPoW Units & Blocks",description:"The TxPoW unit is the main building block of the Minima Blockchain.",source:"@site/docs/learn/minima/txpowunits.md",sourceDirName:"learn/minima",slug:"/learn/minima/txpowunits",permalink:"/docs/learn/minima/txpowunits",draft:!1,editUrl:"https://github.com/minima-global/minidocs/docs/learn/minima/txpowunits.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"MMR Database",permalink:"/docs/learn/minima/mmrdatabase"},next:{title:"The Blockchain",permalink:"/docs/learn/minima/theblockchain"}},s={},m=[{value:"TxPoW Units",id:"txpow-units",level:2},{value:"Witness",id:"witness",level:3},{value:"TxBlocks (Blocks)",id:"txblocks-blocks",level:2}],p={toc:m},d="wrapper";function k(t){let{components:e,...a}=t;return(0,r.kt)(d,(0,n.Z)({},p,a,{components:e,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"txpow-units--blocks"},"TxPoW Units & Blocks"),(0,r.kt)("p",null,"The ",(0,r.kt)("strong",{parentName:"p"},"TxPoW unit")," is the main building block of the Minima Blockchain. ",(0,r.kt)("br",null),"\nTransactions are included in TxPoW units which have the potential to become blocks added to the chain."),(0,r.kt)("h2",{id:"txpow-units"},"TxPoW Units"),(0,r.kt)("p",null,"Before a transaction can be posted to the network, it must be added to a ",(0,r.kt)("strong",{parentName:"p"},"TxPoW unit")," with other essential data and a small amount of \u2018work\u2019 must be done i.e. it must be \u2018mined\u2019."),(0,r.kt)("p",null,"During the TxPoW creation process, in addition to the main transaction, unconfirmed transactions in the mempool will also be added to the body of the TxPoW unit, serving to further propagate mempool transactions to known peers."),(0,r.kt)("p",null,"After being mined, a TxPoW unit will be propagated to the network either as a block if it meets the network block difficulty level, or as a basic TxPoW unit which serves only to propagate known unconfirmed transactions. This ensures block creation is a \u2018chance\u2019 encounter."),(0,r.kt)("p",null,"A node can carry out several activities with a TxPoW unit depending on the situation:"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Generate:")," When a user wishes to send a transaction, or is required to send a ",(0,r.kt)("strong",{parentName:"p"},"Pulse")," to the network, their node will generate (construct) a TxPoW unit containing their transaction and the hashes of other unconfirmed transactions it knows about in the ",(0,r.kt)("strong",{parentName:"p"},"mempool"),". TxPoW units are analogous to compact blocks in Bitcoin ",(0,r.kt)("a",{parentName:"p",href:"/docs/learn/minima/miningconsensus#constructing-txpow-units"},"(see Constructing TxPoW Units).")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Mine:")," Before a node can propagate its TxPoW unit to the network, it must mine the TxPoW unit by cycling through different ",(0,r.kt)("strong",{parentName:"p"},"nonces")," (numbers), adding the nonce to the TxPoW header and hashing the result. Once the resulting hash meets the level of difficulty required by the network (~1 second work), they can propagate their TxPoW unit to other nodes in the network."),(0,r.kt)("admonition",{title:"Note",type:"note"},(0,r.kt)("p",{parentName:"admonition"},"The ",(0,r.kt)("strong",{parentName:"p"},"transaction difficulty")," sets the minimum amount of work a node must provide before their TxPoW can be propagated across the network (~1 second work).This ensures the network has received the transactions in their TxPoW unit, ",(0,r.kt)("strong",{parentName:"p"},"however this does not automatically mean that their transactions are in a block.")," "),(0,r.kt)("p",{parentName:"admonition"},"TxPoW units only become blocks if, by chance, the ",(0,r.kt)("strong",{parentName:"p"},"block difficulty target")," is met in the process of meeting the transaction difficulty target. ")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Check:")," When a node receives a TxPoW unit from another node on the network, it must check it to ensure its validity before processing and forwarding it on to its peers."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Process:")," When the node has checked that a TxPoW unit is valid, it will process it, creating a ",(0,r.kt)("strong",{parentName:"p"},"TxBlock")," and adding it to the chain as a node in the ",(0,r.kt)("strong",{parentName:"p"},"TxPoW tree")," if it meets the required difficulty level to become a block."),(0,r.kt)("p",null,"Diagram: The structure of a TxPoW Unit"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"left"},(0,r.kt)("strong",{parentName:"th"},"TxPoW ID (Hash","[Header]",")")," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("strong",{parentName:"td"},"Header"),(0,r.kt)("br",null),(0,r.kt)("em",{parentName:"td"},"Nonce"),(0,r.kt)("br",null),(0,r.kt)("em",{parentName:"td"},"ChainID"),(0,r.kt)("br",null),(0,r.kt)("em",{parentName:"td"},"TimeMilli"),(0,r.kt)("br",null),(0,r.kt)("em",{parentName:"td"},"Block Number"),(0,r.kt)("br",null),(0,r.kt)("em",{parentName:"td"},"Block Difficulty"),(0,r.kt)("br",null),"\t\t",(0,r.kt)("em",{parentName:"td"},"Cascade Levels"),"\t",(0,r.kt)("br",null),(0,r.kt)("em",{parentName:"td"},"Parent Blocks"),(0,r.kt)("br",null),(0,r.kt)("em",{parentName:"td"},"MMR Root"),(0,r.kt)("br",null),(0,r.kt)("em",{parentName:"td"},"MMR Total"),(0,r.kt)("br",null),(0,r.kt)("em",{parentName:"td"},"Magic"),(0,r.kt)("br",null),(0,r.kt)("em",{parentName:"td"},"Body Hash"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("strong",{parentName:"td"},"Body"),(0,r.kt)("br",null),(0,r.kt)("em",{parentName:"td"},"Random Number"),(0,r.kt)("br",null),(0,r.kt)("em",{parentName:"td"},"Txn Difficulty"),(0,r.kt)("br",null),(0,r.kt)("em",{parentName:"td"},"A Transaction"),(0,r.kt)("br",null),(0,r.kt)("em",{parentName:"td"},"A Witness"),(0,r.kt)("br",null),(0,r.kt)("em",{parentName:"td"},"Burn Txn"),(0,r.kt)("br",null),(0,r.kt)("em",{parentName:"td"},"Burn Witness"),(0,r.kt)("br",null),(0,r.kt)("em",{parentName:"td"},"Txn List"))))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Header")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"left"},"Header Field"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Description"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Size/Format"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("strong",{parentName:"td"},"Nonce")),(0,r.kt)("td",{parentName:"tr",align:"left"},"The final nonce (number) that was included in the TxPoW header so that, when hashed, the required difficulty was achieved."),(0,r.kt)("td",{parentName:"tr",align:"left"},"MiniNumber")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("strong",{parentName:"td"},"Chain ID")),(0,r.kt)("td",{parentName:"tr",align:"left"},"The Chain ID - This defines the rules this block was made under, MUST be 0x00 for Mainnet"),(0,r.kt)("td",{parentName:"tr",align:"left"},"MiniData")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("strong",{parentName:"td"},"TimeMilli")),(0,r.kt)("td",{parentName:"tr",align:"left"},"Time this TxPoW was created in milliseconds since the epoch of 1970-01-01T00:00:00Z"),(0,r.kt)("td",{parentName:"tr",align:"left"},"MiniNumber")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("strong",{parentName:"td"},"Block Number")),(0,r.kt)("td",{parentName:"tr",align:"left"},"Block height to be used if this TxPoW unit becomes a block"),(0,r.kt)("td",{parentName:"tr",align:"left"},"MiniNumber")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("strong",{parentName:"td"},"Block Difficulty")),(0,r.kt)("td",{parentName:"tr",align:"left"},"The Difficulty required for this unit to be considered a valid block"),(0,r.kt)("td",{parentName:"tr",align:"left"},"MiniData")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("strong",{parentName:"td"},"Cascade Levels")),(0,r.kt)("td",{parentName:"tr",align:"left"},"The maximum number of levels in the Cascade (32)"),(0,r.kt)("td",{parentName:"tr",align:"left"},"MiniData array")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("strong",{parentName:"td"},"Super Parents")),(0,r.kt)("td",{parentName:"tr",align:"left"},"Pointer to its immediate previous block and to the most recent block at each Super level. Used for cascading."),(0,r.kt)("td",{parentName:"tr",align:"left"},"MiniData List")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("strong",{parentName:"td"},"MMR Root")),(0,r.kt)("td",{parentName:"tr",align:"left"},"The root hash of the MMR (to prove coins existed using a proof and TxPoW header)"),(0,r.kt)("td",{parentName:"tr",align:"left"},"MiniData")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("strong",{parentName:"td"},"MMR Total")),(0,r.kt)("td",{parentName:"tr",align:"left"},"The sum of all coins in the system (using a hash sum tree, the total amount of Minima is known every block removing the possibility of inflation bugs)"),(0,r.kt)("td",{parentName:"tr",align:"left"},"MiniNumber")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("strong",{parentName:"td"},"Magic")),(0,r.kt)("td",{parentName:"tr",align:"left"},"Chain parameters - the magic numbers: CurrentMaxTxPoWSize,CurrentMaxTxnPerBlock,CurrentMinTxPoWWork,CurrentMaxKISSVMOps"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Magic")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("strong",{parentName:"td"},"TxBodyHash")),(0,r.kt)("td",{parentName:"tr",align:"left"},"The hash of the TxPoW body"),(0,r.kt)("td",{parentName:"tr",align:"left"},"MiniData")))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Body")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"left"},"Body Field"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Description"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Type"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("strong",{parentName:"td"},"Random Number")),(0,r.kt)("td",{parentName:"tr",align:"left"},"A Random number so that everyone is working on a different TxPoW in the pulse"),(0,r.kt)("td",{parentName:"tr",align:"left"},"MiniData")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("strong",{parentName:"td"},"Txn Difficulty")),(0,r.kt)("td",{parentName:"tr",align:"left"},"The Difficulty required for this unit to be a valid TxPoW unit. The value that all users try to achieve when cycling through nonce values."),(0,r.kt)("td",{parentName:"tr",align:"left"},"MiniData")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("strong",{parentName:"td"},"Transaction")),(0,r.kt)("td",{parentName:"tr",align:"left"},"Transaction ID for the main transaction. UTxO (coin) inputs, outputs, state variables, linkhash"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Transaction")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("strong",{parentName:"td"},"Witness")),(0,r.kt)("td",{parentName:"tr",align:"left"},"Signature Proofs",";","Coin Proofs (pointing to a valid unspent MMR entry in the past 24 hours for each input coin used in the txn); Script Proofs (for the various P2SH addresses used)"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Witness")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("strong",{parentName:"td"},"Burn Txn")),(0,r.kt)("td",{parentName:"tr",align:"left"},"Inputs, outputs, state variables and linkhash for the Burn transaction paying for the transaction the user is trying to send. Can be empty."),(0,r.kt)("td",{parentName:"tr",align:"left"},"Transaction")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("strong",{parentName:"td"},"Burn Witness")),(0,r.kt)("td",{parentName:"tr",align:"left"},"The Witness data for the Burn. Signatures, MMR Proofs and scripts. Can be empty."),(0,r.kt)("td",{parentName:"tr",align:"left"},"Witness")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("strong",{parentName:"td"},"Txn List")),(0,r.kt)("td",{parentName:"tr",align:"left"},"List of the hashes of mempool transactions to propagate. These will become confirmed if this TxPoW unit becomes a block. Only the hash of transactions are added since transactions have already been sent across the network."),(0,r.kt)("td",{parentName:"tr",align:"left"},"MiniData array")))),(0,r.kt)("p",null,"The default maximum size of a TxPoW unit is 64MB."),(0,r.kt)("h3",{id:"witness"},"Witness"),(0,r.kt)("p",null,"A Witness provides three proofs that prove a transaction is valid. Each proof is stored in an MMR tree. It has the following attributes:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"left"},"Witness Attribute"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Description"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Type"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("strong",{parentName:"td"},"SignatureProofs")),(0,r.kt)("td",{parentName:"tr",align:"left"},"The MMR Proofs for the Signatures"),(0,r.kt)("td",{parentName:"tr",align:"left"},"ArrayList","<","Signature",">")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("strong",{parentName:"td"},"CoinProofs")),(0,r.kt)("td",{parentName:"tr",align:"left"},"The MMR Proofs that each input Coin is valid and unspent"),(0,r.kt)("td",{parentName:"tr",align:"left"},"ArrayList","<","CoinProof",">")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("strong",{parentName:"td"},"ScriptProofs")),(0,r.kt)("td",{parentName:"tr",align:"left"},"The MMR Proofs for Scripts used in the transactions"),(0,r.kt)("td",{parentName:"tr",align:"left"},"ArrayList","<","ScriptProof",">")))),(0,r.kt)("h2",{id:"txblocks-blocks"},"TxBlocks (Blocks)"),(0,r.kt)("p",null,"TxBlocks are TxPoW that become blocks and get added to the blockchain. TxBlocks can also be referred to as SyncBlocks as they are required for syncing when a new user joins (or existing users rejoin) the network."),(0,r.kt)("p",null,"They include the following details:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"left"},"TxBlock Attribute"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Description"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Type"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("strong",{parentName:"td"},"TxPoW")),(0,r.kt)("td",{parentName:"tr",align:"left"},"The TxPoW object that became this block"),(0,r.kt)("td",{parentName:"tr",align:"left"},"TxPoW")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("strong",{parentName:"td"},"Previous Peaks")),(0,r.kt)("td",{parentName:"tr",align:"left"},"The MMR Peaks from the previous block"),(0,r.kt)("td",{parentName:"tr",align:"left"},"ArrayList","<","MMREntry",">")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("strong",{parentName:"td"},"Spent Coins")),(0,r.kt)("td",{parentName:"tr",align:"left"},"The CoinProofs of all the input (spent) coins, unspent as of the last block"),(0,r.kt)("td",{parentName:"tr",align:"left"},"ArrayList","<","CoinProof",">")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("strong",{parentName:"td"},"New Coins")),(0,r.kt)("td",{parentName:"tr",align:"left"},"A list of all the newly created coins"),(0,r.kt)("td",{parentName:"tr",align:"left"},"ArrayList","<","Coin",">")))))}k.isMDXComponent=!0}}]);