<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.17">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Minima Documentation RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Minima Documentation Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","G-BKE0W3LK7F","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-BKE0W3LK7F"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-BKE0W3LK7F",{})</script><title data-rh="true">Archive Nodes | Minima Documentation</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.minima.global//img/minima_docs.png"><meta data-rh="true" name="twitter:image" content="https://docs.minima.global//img/minima_docs.png"><meta data-rh="true" property="og:url" content="https://docs.minima.global//docs/runanode/archivenodes"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Archive Nodes | Minima Documentation"><meta data-rh="true" name="description" content="Only available from Mainnet (v1.0) onwards"><meta data-rh="true" property="og:description" content="Only available from Mainnet (v1.0) onwards"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.minima.global//docs/runanode/archivenodes"><link data-rh="true" rel="alternate" href="https://docs.minima.global//docs/runanode/archivenodes" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.minima.global//docs/runanode/archivenodes" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.54c53dcb.css">
<link rel="preload" href="/assets/js/runtime~main.385bdcfa.js" as="script">
<link rel="preload" href="/assets/js/main.af6005a3.js" as="script">
</head>
<body class="navigation-with-keyboard" data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Minima" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/logo_dark.svg" alt="Minima" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">Minima Docs</b></a><a class="navbar__item navbar__link" href="/docs/learn/networkoverview">Learn</a><a class="navbar__item navbar__link" href="/docs/runanode/get_started">Run a Node</a><a class="navbar__item navbar__link" href="/docs/about/presale">Presale</a><a class="navbar__item navbar__link" href="/docs/about/tokendistribution/">Tokenomics</a><a class="navbar__item navbar__link" href="/docs/about/mainnetstatus/">Mainnet Status</a></div><div class="navbar__items navbar__items--right"><a href="https://www.minima.global/our-community" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Community<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://github.com/minima-global" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_S7eR toggle_TdHA toggleDisabled_f9M3"><div class="toggleButton_rCf9" role="button" tabindex="-1"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></div><input type="checkbox" class="toggleScreenReader_g2nN" aria-label="Switch between dark and light mode (currently light mode)"></div><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-current"></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y"><nav class="menu thin-scrollbar menu_SkdO"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/about/welcome">About</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/learn/ataglance">Learn</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/runanode/get_started">Run a Node</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/runanode/get_started">Get Started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/runanode/systemrequirements">System Requirements</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/runanode/selectplatform/android_v9_and_up">Select your Platform</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/runanode/incentivesetup">Incentive Program Setup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/runanode/usingminidapps">Using MiniDapps</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/runanode/usingmaxima">Using Maxima</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/runanode/securefunds">Securing your funds</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/runanode/restorefunds">Restoring lost funds</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/runanode/archivenodes">Archive Nodes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/runanode/terminal_commands">Terminal Commands</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/runanode/troubleshooting">Troubleshooting</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/buildonminima/startaprivatenode">Build</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/earnrewards/minimaincentiveprogram">Earn Rewards</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/terms/minimatermsandconditions">Terms</a></div></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/">üè†</a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link breadcrumbsItemLink_e5ie">Run a Node</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/docs/runanode/archivenodes">Archive Nodes</a></li></ul></nav><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Archive Nodes</h1><p><em>Only available from Mainnet (v1.0) onwards</em></p><h2 class="anchor anchorWithStickyNavbar_mojV" id="overview">Overview<a class="hash-link" href="#overview" title="Direct link to heading">‚Äã</a></h2><p>All Minima nodes have a <strong>txpow database</strong> and an <strong>archive database</strong>.</p><p>The <strong>txpow database</strong> contains full blocks, which includes complete information about all transactions; the latest MMR proofs for all coins spent or created in the block; and the Proof-of-Work expended for the block.
It only contains most recent blocks from the unpruned section of the chain which is approximately the last 24 hours worth.</p><p>The <strong>archive database</strong> contains the last 2 months of <strong>syncblocks</strong>, which do not include transaction details but do hold all the MMR proofs for coins spent or created in the block as well as the Proof-of-Work. Syncblocks older than 2 months are not stored.</p><p>When a connection is made between two nodes, they exchange <strong>Initial Blockchain Download</strong> (IBD) <strong>data</strong> which can consist of full blocks and syncblocks, depending on how far behind the tip block the other user is.</p><p>For a returning user who has been offline for too long or has lost access to their node - meaning they no longer hold up-to-date proofs for their own coins - the syncblocks available from regular peers during the IBD process may not be sufficient to re-sync the user.</p><p><strong>Archive nodes</strong> store <strong>all</strong> the <strong>syncblocks</strong> from after the Archive node is started, no pruning is done after 2 months. Therefore, they can be used to re-sync any returning user, providing them with the most recent proofs for their coins. </p><h2 class="anchor anchorWithStickyNavbar_mojV" id="use-cases">Use cases<a class="hash-link" href="#use-cases" title="Direct link to heading">‚Äã</a></h2><p>Archive nodes with a static external IP can be used to re-sync users who have lost access to their node or been offline for too long and are therefore unable to sync to the chain tip block with the IBD data alone.</p><p>You may also choose run a local Archive node for your own purposes, in addition to a non-archive node, in the case you ever need to re-sync</p><p>A returning user has two options for re-syncing from an Archive node:</p><ul><li><p><strong>Chain re-sync:</strong> to be used when the user still has access to their node but is on the wrong chain or is unable to catch up to the latest tip block as a result of being offline for too long. <br>
In the case of a chain re-sync, the user&#x27;s node will not be wiped, only re-synced to the latest tip block.</p></li><li><p><strong>Seed re-sync:</strong> to be used if a user has lost access to their node or device completely; they can restore access to their funds by doing a seed re-sync from a newly created node. Their 24 word Seed Phrase is required.</p></li></ul><div class="admonition admonition-warning alert alert--danger"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>warning</h5></div><div class="admonition-content"><p>A Seed re-sync should only ever be used as a last resort in the case a user has no valid backup to restore.</p></div></div><blockquote><p><strong>Example A - Personal Archive Node</strong></p><p>A user running a node on a mobile device may choose to run an Archive node locally on their laptop/desktop at home in case they lose their phone and do not have a valid backup of their node stored elsewhere. In this case, the user would always have the latest proofs for their coins on their own Archive node that they could use to re-sync to a new device. </p></blockquote><blockquote><p><strong>Example B - Archive Node as a service</strong></p><p>A user with a server with a static external IP can run an Archive node and share the IP:Port of their Archive node with other users who require a chain or seed re-sync. The user requiring the re-sync would use the initiate the chain or seed re-sync from their new/exising node.</p></blockquote><h2 class="anchor anchorWithStickyNavbar_mojV" id="system-requirements">System Requirements<a class="hash-link" href="#system-requirements" title="Direct link to heading">‚Äã</a></h2><p>Anyone can run an Archive node from a desktop or server.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="minimum-hardware-requirements">Minimum Hardware Requirements<a class="hash-link" href="#minimum-hardware-requirements" title="Direct link to heading">‚Äã</a></h3><p><strong>Processing:</strong> 2 CPU <br>
<strong>Memory:</strong> 2GB RAM<br>
<strong>Storage:</strong> 5GB*</p><p>*This may change over time.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="ports">Ports<a class="hash-link" href="#ports" title="Direct link to heading">‚Äã</a></h3><p>Archive nodes wishing to run as a service must be open to inbound connections on port 9001 (or the main custom Minima port you have chosen).</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="starting-an-archive-node">Starting an Archive Node<a class="hash-link" href="#starting-an-archive-node" title="Direct link to heading">‚Äã</a></h2><p>When you start an Archive node, you will start storing the archive data from that point onwards, therefore you can only re-sync coins for users that are created after this point.</p><p>It is possible to run an Archive node from the Genesis block if you either start your Archive node within 2 months of the Genesis block or by doing a chain re-sync for your Archive node off an Archive node that was started at Genesis.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="manual-archive-node-desktop">Manual Archive node (desktop)<a class="hash-link" href="#manual-archive-node-desktop" title="Direct link to heading">‚Äã</a></h3><p>To start a Minima Archive node manually, you need to add the <code>-archive</code> parameter to the start up command. </p><p>If you have an existing node that you wish to change to an Archive node, you can <code>quit</code> your current node from the Terminal and restart the same node, adding in the archive parameter on the start up line.<br> It is always a good idea to take a backup of your node before stopping it. </p><h4 class="anchor anchorWithStickyNavbar_mojV" id="examples">Examples<a class="hash-link" href="#examples" title="Direct link to heading">‚Äã</a></h4><h4 class="anchor anchorWithStickyNavbar_mojV" id="windows">Windows<a class="hash-link" href="#windows" title="Direct link to heading">‚Äã</a></h4><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">java -jar C:\Users\INSERTUSERNAME\Downloads\minima.jar -mdsenable -archive</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_mojV" id="mac">Mac<a class="hash-link" href="#mac" title="Direct link to heading">‚Äã</a></h4><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">sudo java -jar /Users/INSERTUSERNAME/Downloads/minima.jar -mdsenable -archive</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_mojV" id="linux">Linux<a class="hash-link" href="#linux" title="Direct link to heading">‚Äã</a></h4><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">sudo java -jar /home/INSERTUSERNAME/minima.jar -mdsenable -archive</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><div class="admonition admonition-important alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>important</h5></div><div class="admonition-content"><p>If you used the <code>-data</code> parameter to specify a data folder when starting your existing node, you must make sure you start the Archive node using the same data folder you chose originally.</p></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="docker-archive-node">Docker Archive node<a class="hash-link" href="#docker-archive-node" title="Direct link to heading">‚Äã</a></h3><p>To start a Minima Archive node container, you need to add the <code>-e minima_archive=true</code> environment variable to the start up command. </p><p>If you originally started your node without the <code>-e minima_archive=true</code> environment variable, you can either:</p><ul><li>start a new separate container for your Archive node,</li><li>backup your existing node, the restore it to a new archive container you create, </li><li>backup your existing node, then stop and remove your existing Minima container and start a new Minima container including <code>-e minima_archive=true</code>, using the <strong>SAME</strong> data folder as your old node e.g. minimadocker9001 or minimadocker8001</li></ul><h4 class="anchor anchorWithStickyNavbar_mojV" id="examples-starting-a-new-archive-node">Examples: Starting a new Archive node<a class="hash-link" href="#examples-starting-a-new-archive-node" title="Direct link to heading">‚Äã</a></h4><h4 class="anchor anchorWithStickyNavbar_mojV" id="linux-vps">Linux VPS<a class="hash-link" href="#linux-vps" title="Direct link to heading">‚Äã</a></h4><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">docker run -d -e minima_mdspassword=INSERTPASSWORD -e minima_server=true -e minima_archive=true -v ~/minimadockerarchive:/home/minima/data -p 7001-7004:9001-9004 --restart unless-stopped --name minimaarchive minimaglobal/minima:latest</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_mojV" id="windows-1">Windows<a class="hash-link" href="#windows-1" title="Direct link to heading">‚Äã</a></h4><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">docker run -d -e minima_mdspassword=INSERTPASSWORD -e minima_desktop=true -e minima_archive=true -v C:\Users\INSERTUSERNAME\minimadockerarchive:/home/minima/data -p 7001-7004:9001-9004 --restart unless-stopped --name minimaarchive minimaglobal/minima:latest</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_mojV" id="mac-1">Mac<a class="hash-link" href="#mac-1" title="Direct link to heading">‚Äã</a></h4><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">docker run -d -e minima_mdspassword=INSERTPASSWORD -e minima_desktop=true -e minima_archive=true -v ~/minimadockerarchive:/home/minima/data -p 7001-7004:9001-9004 --restart unless-stopped --name minimaarchive minimaglobal/minima:latest</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_mojV" id="linux-desktop">Linux desktop<a class="hash-link" href="#linux-desktop" title="Direct link to heading">‚Äã</a></h4><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">docker run -d -e minima_mdspassword=INSERTPASSWORD -e minima_desktop=true -e minima_archive=true -v ~/minimadockerarchive:/home/minima/data -p 7001-7004:9001-9004 --restart unless-stopped --name minimaarchive minimaglobal/minima:latest</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="how-to-check-your-archive-data">How to check your Archive data<a class="hash-link" href="#how-to-check-your-archive-data" title="Direct link to heading">‚Äã</a></h2><p>From the Terminal MiniDapp or Docker CLI, you can check the integrity of your Archive data by running the command:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">archive action:integrity</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Example</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">archive action:integrity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;command&quot;:&quot;archive&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;params&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;action&quot;:&quot;integrity&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;status&quot;:true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;pending&quot;:false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;response&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;message&quot;:&quot;Archive integrity check completed&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;start&quot;:1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;blocks&quot;:6443,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;cascade&quot;:true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;errors&quot;:0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;recommend&quot;:&quot;Your ArchiveDB is correct and has no errors.&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>This checks your archive data for missing or broken blocks.</p><p>If there is an error, you will need to re-sync from another Archive node.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="mysql-archive-exports">MySQL Archive Exports<a class="hash-link" href="#mysql-archive-exports" title="Direct link to heading">‚Äã</a></h2><p>It is possible to export your node&#x27;s archive database to an external MySQL database for offline storage. </p><p>Using a MySQL database to hold a backup of your archive db means you can:</p><ul><li>export the data from MySQL database to an SQL file;</li><li>import the SQL file to another MySQL database;</li><li>perform a chain or seed re-sync from the MySQL database for any Minima node (if made publicly available)</li></ul><p>In this setup, we will be using Docker desktop to run a Minima Archive node container and a MySQL database container which will hold the archive db data. </p><h3 class="anchor anchorWithStickyNavbar_mojV" id="prerequisites">Prerequisites<a class="hash-link" href="#prerequisites" title="Direct link to heading">‚Äã</a></h3><ul><li>An existing Archive node running in Docker</li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="minima---mysql-setup">Minima - MySQL setup<a class="hash-link" href="#minima---mysql-setup" title="Direct link to heading">‚Äã</a></h3><ol><li><p>Install MySQL Workbench from the <a href="https://dev.mysql.com/downloads/workbench/" target="_blank" rel="noopener noreferrer">official website</a>, selecting the Operating System relevant to you</p></li><li><p>Open your Terminal/Command Line interface</p></li><li><p>Setup a Docker network, this will allow you to connect your node to your MySQL database that we will create in the next step</p></li></ol><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">docker network create -d bridge minimanetwork</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Now you should see <strong>minimanetwork</strong> listed if you run </p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">docker network ls</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><ol start="4"><li>Start a MySQL database as a Docker container</li></ol><p>You will need to set your own values for the following parameters:</p><ul><li>MYSQL_ROOT_PASSWORD : create a root password</li><li>MYSQL_DATABASE : create a name for the archive database</li><li>MYSQL_USER : create a user for the archive database</li><li>MYSQL_PASSWORD : create a password for the MYSQL_USER</li></ul><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">docker run -d -p 3307:3306  -e MYSQL_ROOT_PASSWORD=yourrootpassword -e MYSQL_DATABASE=archivedb -e MYSQL_USER=archiveuser -e MYSQL_PASSWORD=youruserpassword --restart unless-stopped --network=minimanetwork --label=com.centurylinklabs.watchtower.enable=false --name minimysql mysql:8.0</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>This will create a Docker container called <strong>minimySQL</strong> which runs your MySQL database called <strong>archivedb</strong>.</p><p>It will run on your port 3307 (mapped to 3306 in Docker); create the user specified and give them access to the database; connect the MySQL db to the <strong>minimanetwork</strong> Docker network; and disable Watchtower updates for the container. </p><ol start="5"><li>Connect your Minima Archive node container to the <strong>minimanetwork</strong> Docker network</li></ol><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">docker network connect minimanetwork minimaarchive</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>You should now see your <strong>minimysql</strong> and <strong>minimaarchive</strong> containers in the same network if you run:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">docker network inspect minimanetwork</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Output:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">docker network inspect minimanetwork</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;Name&quot;: &quot;minimanetwork&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;ConfigOnly&quot;: false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;Containers&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;182c4041ad365669b365ee6e0691e5488596ab1e974b791bba1306c74643bd03&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;Name&quot;: &quot;minimadev&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;38906df591a5ba642e755509e8c162e114b6dd56abc2ec2e76a0c673f5187b09&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;Name&quot;: &quot;minimysql&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><ol start="6"><li>Open MySQL Workbench and create a new connection with the following parameters</li></ol><p><strong>Connection name:</strong> minimaarchive<br>
<strong>Hostname:</strong> 127.0.0.1 (or your public IP if running on a server)<br>
<strong>Port:</strong> 3307<br>
<strong>Username:</strong> root<br>
<strong>Password:</strong> Click on ‚ÄúStore in Vault‚Äù and enter the root password you used in step 4 above. <br></p><p><img loading="lazy" alt="sql" src="/assets/images/A.AddConnection-28267dbcd83cca00260f640cbd100d2c.png" width="1919" height="565"> </p><p><img loading="lazy" alt="sql" src="/assets/images/B.CreateConnection-a4a7509fee60ea34865902ee8f8ee960.png" width="983" height="616"> </p><ol start="7"><li>Click Test Connection, then OK.</li></ol><p>This will setup a connection to the MySQL database running in Docker.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="how-to-sync-the-archive-data-to-mysql">How to sync the archive data to MySQL<a class="hash-link" href="#how-to-sync-the-archive-data-to-mysql" title="Direct link to heading">‚Äã</a></h3><p>To sync your Minima archive database to your MySQL data:</p><ol><li><p>Open Minima Docker CLI or Minima Terminal MiniDapp</p></li><li><p>Run the command</p></li></ol><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">mysql host:minimysql database:archivedb user:archiveuser password:youruserpassword action:info</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Example output:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;command&quot;:&quot;mysql&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;params&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;host&quot;:&quot;minimysql&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;database&quot;:&quot;archivedb&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;user&quot;:&quot;archiveuser&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;password&quot;:&quot;youruserpassword&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;action&quot;:&quot;info&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;status&quot;:true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;pending&quot;:false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;response&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;archive&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;archivestart&quot;:1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;archiveend&quot;:72106,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;archivetotal&quot;:72105</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;mysql&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;mysqlstart&quot;:-1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;mysqlend&quot;:-1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;mysqltotal&quot;:0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>In the above example, the Minima archive db contains 72105 blocks and the mysql has 0 blocks, as expected.</p><div class="admonition admonition-important alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>before syncing</h5></div><div class="admonition-content"><p>Before running an update, you must check your node is on the correct tip block. Run the <code>status</code> command to check your tip block is up to date.</p></div></div><p>To update the MySQL database with the Minima archive data:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">mysql host:minimysql database:archivedb user:archiveuser password:youruserpassword action:update</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Wait for the sync to finish</p><p>Example output:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;command&quot;:&quot;mysql&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;params&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;host&quot;:&quot;minimysql&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;database&quot;:&quot;archivedb&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;user&quot;:&quot;archiveuser&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;password&quot;:&quot;youruserpassword&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;action&quot;:&quot;update&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;status&quot;:true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;pending&quot;:false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;response&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;archive&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;archivestart&quot;:1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;archiveend&quot;:72206,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;archivetotal&quot;:72205</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;mysql&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;mysqlstart&quot;:1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;mysqlend&quot;:72206,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;mysqltotal&quot;:72205</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Future updates will be incremental, only syncing the new blocks that are not already in the MySQL database.</p><p>To check the integrity of the data: </p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">mysql host:minimysql database:archivedb user:archiveuser password:youruserpassword action:integrity</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>This will ensure there are no missing blocks in the MySQL database.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="exporting-from-mysql-workbench">Exporting from MySQL Workbench<a class="hash-link" href="#exporting-from-mysql-workbench" title="Direct link to heading">‚Äã</a></h3><p>To Export the archive data from MySQL to a file:</p><ol><li><p>Open MySQL workbench</p></li><li><p>Double click on <strong>minimaarchive</strong> to open the database</p></li><li><p>From the <strong>Administration</strong> tab, select <strong>Data Export</strong> (also available from the Server dropdown menu)</p></li></ol><p><img loading="lazy" alt="sql" src="/assets/images/F.AdminExportData-b57a71a8ddaa6625da8f9a8b9f7f4625.png#width50" width="537" height="763"> </p><ol start="4"><li><p>Check the box for <strong>archivedb</strong> and check the boxes for <strong>cascadedata</strong> and <strong>syncblock</strong> </p></li><li><p>Under Export Options, select <strong>Export to self-contained file</strong>. Optionally change the file path.</p></li></ol><p><img loading="lazy" alt="sql" src="/assets/images/G.DataExportSelection-97884f72abc1375e42b72397eddba0bc.png" width="1195" height="456"> </p><ol start="6"><li>Click <strong>Start Export</strong></li></ol><p>The exported file will be unzipped, you should zip the exported file to reduce your storage requirement. </p><p>This file can be imported to MySQL if required.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="restoring-from-mysql-workbench">Restoring from MySQL Workbench<a class="hash-link" href="#restoring-from-mysql-workbench" title="Direct link to heading">‚Äã</a></h3><p>If a user has been offline for too long and cannot resync to the chain from the IBD alone, or has lost access to their node, they can connect to a MySQL database to perform a chain or seed resync, provided it is publicly accessible.</p><p>This is an alternative option to re-syncing from an Archive node.</p><p>As with Archive nodes, there are two options when using a MySQL database to re-sync your a node:</p><ul><li><p><strong>Chain re-sync:</strong> If a user has been offline for too long and their node is not on the correct tip block, they can re-sync to the latest block by performing a <a href="#chain-resync">chain re-sync</a> from a MySQL database. <strong>The node will NOT be wiped during this process.</strong></p></li><li><p><strong>Seed re-sync:</strong> If a user does not have a valid backup or has lost access to their node, they can restore access to their coins by performing a <a href="#seed-resync">seed re-sync</a> from a MySQL database using their 24 word seed phrase. <strong>The node will first be wiped before the re-sync begins.</strong></p></li></ul><h4 class="anchor anchorWithStickyNavbar_mojV" id="to-perform-a-chain-re-sync">To perform a chain re-sync<a class="hash-link" href="#to-perform-a-chain-re-sync" title="Direct link to heading">‚Äã</a></h4><ol><li>On the node requiring a re-sync, connect to the MySQL archive database</li></ol><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">mysql host:127.0.0.1:3307 database:archivedb user:archiveuser password:youruserpassword action:info</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><ol start="2"><li>To start the chain re-sync, run</li></ol><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">mysql host:mysqlhost:port database:archivedb user:archiveuser password:youruserpassword action:resync</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Your coins will remain safe throughout this process. Once complete, you will be on the correct tip block.</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="to-perform-a-seed-re-sync">To perform a seed re-sync<a class="hash-link" href="#to-perform-a-seed-re-sync" title="Direct link to heading">‚Äã</a></h4><ol><li>On the node requiring a re-sync, connect to check the MySQL archive database</li></ol><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">mysql host:127.0.0.1:3307 database:archivedb user:archiveuser password:youruserpassword action:info</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><ol start="2"><li>To start the seed re-sync, run</li></ol><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">mysql host:mysqlhost:port database:archivedb user:archiveuser password:youruserpassword action:resync phrase:\&quot;24 WORDS HERE\&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Optionally set the number of keys and keyuses relevant to you. If not specified, the defaults are keys:80 and keyuses:1000</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">mysql host:mysqlhost:port database:archivedb user:archiveuser password:youruserpassword action:resync phrase:\&quot;24 WORDS HERE\&quot; keys:90 keyuses:2000</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="how-to-check-the-coins-for-an-address">How to check the coins for an address<a class="hash-link" href="#how-to-check-the-coins-for-an-address" title="Direct link to heading">‚Äã</a></h3><p>It is possible to check the archive and display all spent and unspent coins for a chosen address using</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">mysql host:127.0.0.1:3307 database:archivedb user:archiveuser password:youruserpassword action:addresscheck address:0x79...</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/minima-global/minidocs/docs/runanode/archivenodes.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/runanode/restorefunds"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Restoring lost funds</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/runanode/terminal_commands"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Terminal Commands</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#use-cases" class="table-of-contents__link toc-highlight">Use cases</a></li><li><a href="#system-requirements" class="table-of-contents__link toc-highlight">System Requirements</a><ul><li><a href="#minimum-hardware-requirements" class="table-of-contents__link toc-highlight">Minimum Hardware Requirements</a></li><li><a href="#ports" class="table-of-contents__link toc-highlight">Ports</a></li></ul></li><li><a href="#starting-an-archive-node" class="table-of-contents__link toc-highlight">Starting an Archive Node</a><ul><li><a href="#manual-archive-node-desktop" class="table-of-contents__link toc-highlight">Manual Archive node (desktop)</a></li><li><a href="#docker-archive-node" class="table-of-contents__link toc-highlight">Docker Archive node</a></li></ul></li><li><a href="#how-to-check-your-archive-data" class="table-of-contents__link toc-highlight">How to check your Archive data</a></li><li><a href="#mysql-archive-exports" class="table-of-contents__link toc-highlight">MySQL Archive Exports</a><ul><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a></li><li><a href="#minima---mysql-setup" class="table-of-contents__link toc-highlight">Minima - MySQL setup</a></li><li><a href="#how-to-sync-the-archive-data-to-mysql" class="table-of-contents__link toc-highlight">How to sync the archive data to MySQL</a></li><li><a href="#exporting-from-mysql-workbench" class="table-of-contents__link toc-highlight">Exporting from MySQL Workbench</a></li><li><a href="#restoring-from-mysql-workbench" class="table-of-contents__link toc-highlight">Restoring from MySQL Workbench</a></li><li><a href="#how-to-check-the-coins-for-an-address" class="table-of-contents__link toc-highlight">How to check the coins for an address</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title"></div><ul class="footer__items"><li class="footer__item">
                  <a href="https://www.minima.global/" class="footer__logo" target="_blank" rel="noreferrer noopener">
                    <img src="https://docs.minima.global/img/minima_logo.svg" alt="Minima Global">
                  </a>
                  <p>
                  The evolution will not be centralized<br>Become part of it
                  </p>
                </li><li class="footer__item"><a class="footer__link-item" href="/docs/terms/minimatermsandconditions/">Terms &amp; conditions</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/terms/minimaprivacypolicy/">Privacy policy</a></li></ul></div><div class="col footer__col"><div class="footer__title">Quick Links</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/runanode/get_started">Run a node</a></li><li class="footer__item"><a href="https://www.minima.global/blog" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://www.minima.global/news" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>News<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="http://newsletter.minima.global/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Newsletter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://www.minima.global/minidapps" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>MiniDapps<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://www.minima.global/media-kit" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Media kit<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://merch.minima.global/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Merchandise<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Social</div><ul class="footer__items"><li class="footer__item"><a href="https://discord.com/invite/minima" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://t.me/Minima_Global" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Telegram<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/Minima_Global" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UCDe2j57uQrUVtVizFbDpsoQ" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>YouTube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://coinmarketcap.com/currencies/minima-global/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>CoinMarketCap<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://www.coingecko.com/en/coins/minima" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>CoinGecko<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">All rights reserved Minima Ltd ¬© 2023</div></div></div></footer></div>
<script src="/assets/js/runtime~main.385bdcfa.js"></script>
<script src="/assets/js/main.af6005a3.js"></script>
</body>
</html>